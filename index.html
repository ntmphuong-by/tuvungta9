<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Success 9 Glossary Game (Full 4 Images)</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ed6c02; /* Cam ch·ªß ƒë·∫°o c·ªßa s√°ch */
            --secondary: #2e7d32; /* Xanh l√° */
            --bg: #fff3e0;
            --text: #37474f;
        }

        * { box-sizing: border-box; }
        body { font-family: 'Nunito', sans-serif; background: var(--bg); margin: 0; padding-bottom: 60px; color: var(--text); }

        /* HEADER */
        header {
            background: linear-gradient(135deg, var(--primary), #ff9800);
            color: white; padding: 15px; text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        h1 { margin: 0; font-size: 22px; font-weight: 800; }
        p { margin: 5px 0 0; opacity: 0.9; font-size: 14px; }

        /* CONTROLS */
        .controls {
            padding: 15px; background: rgba(255,255,255,0.95); backdrop-filter: blur(5px);
            position: sticky; top: 0; z-index: 100; text-align: center; border-bottom: 2px solid #eee;
        }
        select {
            padding: 10px 20px; font-size: 16px; border-radius: 25px; border: 2px solid var(--primary);
            font-weight: bold; width: 100%; max-width: 400px; color: var(--text); outline: none;
        }

        /* TABS */
        .tabs { display: flex; justify-content: center; gap: 15px; margin: 20px 0; }
        .tab-btn {
            padding: 10px 30px; border: none; background: white; border-radius: 25px;
            font-weight: 700; cursor: pointer; transition: 0.3s; color: #555;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        .tab-btn.active { background: var(--secondary); color: white; transform: translateY(-2px); }

        /* FLASHCARD MODE */
        .container { max-width: 1100px; margin: 0 auto; padding: 0 15px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .card {
            background: transparent; height: 200px; perspective: 1000px; cursor: pointer;
        }
        .card-inner {
            position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s;
            transform-style: preserve-3d; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .card.flipped .card-inner { transform: rotateY(180deg); }
        
        .front, .back {
            position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            border-radius: 12px; padding: 15px;
        }
        .front { background: white; color: var(--text); }
        .back { background: var(--primary); color: white; transform: rotateY(180deg); }

        .word { font-size: 20px; font-weight: 800; color: var(--primary); margin-bottom: 5px; }
        .ipa { font-size: 14px; color: #777; font-family: 'Arial', sans-serif; margin-bottom: 5px; font-style: italic; }
        .type { font-size: 12px; background: #eee; padding: 3px 8px; border-radius: 4px; color: #555; font-weight: bold; }
        .meaning { font-size: 17px; font-weight: 700; line-height: 1.4; }

        /* QUIZ MODE */
        .quiz-box { 
            background: white; padding: 30px; border-radius: 15px; text-align: center; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; 
        }
        .q-word { font-size: 28px; font-weight: 800; margin-bottom: 20px; color: var(--primary); }
        .options { display: grid; gap: 12px; }
        .opt { 
            padding: 15px; border: 2px solid #eee; background: #fafafa; border-radius: 10px; 
            cursor: pointer; font-weight: 600; transition: 0.2s; font-size: 16px;
        }
        .opt:hover { border-color: var(--primary); background: #fff3e0; }
        .opt.correct { background: #c8e6c9; border-color: #388e3c; color: #1b5e20; }
        .opt.wrong { background: #ffcdd2; border-color: #d32f2f; color: #b71c1c; opacity: 0.7; }
        .score-board { font-size: 18px; font-weight: 800; color: var(--secondary); margin-bottom: 15px; }
        .next-btn { 
            margin-top: 20px; padding: 12px 30px; background: var(--primary); color: white; 
            border: none; border-radius: 25px; cursor: pointer; display: none; font-size: 16px; font-weight: bold;
        }

        .hidden { display: none; }
        
        @media (max-width: 600px) {
            .grid { grid-template-columns: 1fr 1fr; }
            .card { height: 180px; }
            .word { font-size: 16px; }
        }
    </style>
</head>
<body>

<header>
    <h1>üìò Global Success 9 Glossary</h1>
    <p>T·ªïng h·ª£p t·ª´ v·ª±ng Units 1 - 12 (Full Data)</p>
</header>

<div class="controls">
    <select id="unitSelect" onchange="loadUnit()">
        </select>
</div>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" onclick="switchMode('learn')">üìñ H·ªçc T·ª´</button>
        <button class="tab-btn" onclick="switchMode('quiz')">üéÆ Tr·∫Øc Nghi·ªám</button>
    </div>

    <div id="learnArea" class="grid"></div>

    <div id="quizArea" class="hidden">
        <div class="quiz-box">
            <div class="score-board">ƒêi·ªÉm: <span id="scoreVal">0</span></div>
            <div class="q-word" id="qWord">...</div>
            <div class="options" id="qOptions"></div>
            <div id="feedback" style="margin-top:15px; font-weight:bold; height:20px;"></div>
            <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Ti·∫øp theo ‚ûú</button>
        </div>
    </div>
</div>

<script>
    // --- DATABASE (FULL 4 IMAGES - GS9) ---
    const db = {
        "u1": { title: "Unit 1: Local Community", words: [
            {w:"artisan", p:"/Àå…ëÀêt…™Ààz√¶n/", t:"n", m:"th·ª£ l√†m ngh·ªÅ th·ªß c√¥ng"},
            {w:"community", p:"/k…ôÀàmjuÀên…ôti/", t:"n", m:"c·ªông ƒë·ªìng"},
            {w:"community helper", p:"/k…ôÀàmjuÀên…ôti Ààhelp…ô/", t:"n", m:"ng∆∞·ªùi ph·ª•c v·ª• c·ªông ƒë·ªìng"},
            {w:"craft village", p:"/kr…ëÀêft Ààv…™l…™d í/", t:"n", m:"l√†ng ngh·ªÅ th·ªß c√¥ng"},
            {w:"cut down on", p:"/k åt da än …ín/", t:"v", m:"c·∫Øt gi·∫£m"},
            {w:"delivery person", p:"/d…™Ààl…™v…ôri Ààp…úÀêsn/", t:"n", m:"nh√¢n vi√™n giao h√†ng"},
            {w:"electrician", p:"/…™ÀålekÀàtr…™ Én/", t:"n", m:"th·ª£ ƒëi·ªán"},
            {w:"facilities", p:"/f…ôÀàs…™l…ôtiz/", t:"n, plural", m:"c∆° s·ªü v·∫≠t ch·∫•t"},
            {w:"firefighter", p:"/Ààfa…™…ôfa…™t…ô/", t:"n", m:"l√≠nh c·ª©u h·ªèa"},
            {w:"fragrance", p:"/Ààfre…™gr…ôns/", t:"n", m:"h∆∞∆°ng th∆°m"},
            {w:"function", p:"/Ààf å≈ãk Én/", t:"n", m:"ch·ª©c nƒÉng"},
            {w:"garbage collector", p:"/Ààg…ëÀêb…™d í k…ôlekt…ô/", t:"n", m:"nh√¢n vi√™n d·ªçn v·ªá sinh"},
            {w:"get on with", p:"/get …ín w…™√∞/", t:"v", m:"c√≥ quan h·ªá t·ªët v·ªõi"},
            {w:"hand down", p:"/h√¶nd da än/", t:"v", m:"truy·ªÅn l·∫°i"},
            {w:"handicraft", p:"/Ààh√¶ndikr…ëÀêft/", t:"n", m:"s·∫£n ph·∫©m th·ªß c√¥ng"},
            {w:"look around", p:"/l äk …ôÀàra änd/", t:"v", m:"ng·∫Øm ngh√≠a xung quanh"},
            {w:"original", p:"/…ôÀàr…™d í…ônl/", t:"adj", m:"nguy√™n b·∫£n"},
            {w:"pass down", p:"/p…ëÀês da än/", t:"v", m:"truy·ªÅn l·∫°i"},
            {w:"police officer", p:"/p…ôÀàliÀês …íf…™s…ô/", t:"n", m:"c√¥ng an"},
            {w:"pottery", p:"/Ààp…ít…ôri/", t:"n", m:"ƒë·ªì g·ªëm"},
            {w:"preserve", p:"/pr…™Ààz…úÀêv/", t:"v", m:"b·∫£o t·ªìn"},
            {w:"run out of", p:"/r ån a ät …ôv/", t:"v", m:"h·∫øt, c·∫°n ki·ªát"},
            {w:"speciality", p:"/Àåspe ÉiÀà√¶l…ôti/", t:"n", m:"ƒë·∫∑c s·∫£n"},
            {w:"suburb", p:"/Ààs åb…úÀêb/", t:"n", m:"v√πng ngo·∫°i √¥"},
            {w:"tourist attraction", p:"/Ààt ä…ôr…™st …ôÀàtr√¶k Én/", t:"n", m:"ƒëi·ªÉm du l·ªãch"}
        ]},
        "u2": { title: "Unit 2: City Life", words: [
            {w:"bustling", p:"/Ààb åsl…™≈ã/", t:"adj", m:"h·ªëi h·∫£, nh·ªôn nh·ªãp"},
            {w:"carry out", p:"/Ààk√¶ri a ät/", t:"v", m:"ti·∫øn h√†nh (nghi√™n c·ª©u...)"},
            {w:"come down with", p:"/k åm da än w…™√∞/", t:"v", m:"b·ªã ·ªëm (v√¨ b·ªánh g√¨)"},
            {w:"concrete jungle", p:"/Àåk…í≈ãkriÀêt Ààd í å≈ãgl/", t:"n", m:"r·ª´ng b√™ t√¥ng (khu nhi·ªÅu nh√† cao t·∫ßng)"},
            {w:"congested", p:"/k…ônÀàd íest…™d/", t:"adj", m:"t·∫Øc ngh·∫Ωn (giao th√¥ng)"},
            {w:"construction site", p:"/k…ônÀàstr åk Én sa…™t/", t:"n", m:"c√¥ng tr∆∞·ªùng x√¢y d·ª±ng"},
            {w:"downtown", p:"/Àåda änÀàta än/", t:"n", m:"khu trung t√¢m th√†nh ph·ªë"},
            {w:"get around", p:"/get …ôÀàra änd/", t:"v", m:"ƒëi xung quanh, di chuy·ªÉn"},
            {w:"hang out with", p:"/h√¶≈ã a ät w…™√∞/", t:"v", m:"ƒëi ch∆°i (c√πng ai)"},
            {w:"hygiene", p:"/Ààha…™d íiÀên/", t:"n", m:"v·ªá sinh"},
            {w:"itchy", p:"/Àà…™t Éi/", t:"adj", m:"ng·ª©a, g√¢y ng·ª©a"},
            {w:"leftover", p:"/Ààleft…ô äv…ô/", t:"n", m:"th·ª©c ƒÉn th·ª´a"},
            {w:"liveable", p:"/Ààl…™v…ôbl/", t:"adj", m:"(n∆°i) ƒë√°ng s·ªëng"},
            {w:"metro", p:"/Ààmetr…ô ä/", t:"n", m:"h·ªá th·ªëng t√†u ƒëi·ªán ng·∫ßm"},
            {w:"pricey", p:"/Ààpra…™si/", t:"adj", m:"ƒë·∫Øt ƒë·ªè"},
            {w:"process", p:"/Ààpr…ô äses/", t:"v", m:"x·ª≠ l√Ω"},
            {w:"public amenities", p:"/Ààp åbl…™k …ôÀàmiÀên…ôtiz/", t:"n", m:"nh·ªØng ti·ªán √≠ch c√¥ng c·ªông"},
            {w:"rush hour", p:"/Ààr å É a ä…ô/", t:"n", m:"gi·ªù cao ƒëi·ªÉm"},
            {w:"sky train", p:"/ska…™ tre…™n/", t:"n", m:"t√†u ƒëi·ªán tr√™n kh√¥ng"},
            {w:"tram", p:"/tr√¶m/", t:"n", m:"xe ƒëi·ªán"},
            {w:"underground", p:"/Àå ånd…ôÀàgra änd/", t:"n", m:"(h·ªá th·ªëng) t√†u ƒëi·ªán ng·∫ßm"}
        ]},
        "u3": { title: "Unit 3: Healthy Living for Teens", words: [
            {w:"accomplish", p:"/…ôÀàk åmpl…™ É/", t:"v", m:"ho√†n th√†nh, ƒë·∫°t ƒë∆∞·ª£c"},
            {w:"additional", p:"/…ôÀàd…™ É…ônl/", t:"adj", m:"th√™m, th√™m v√†o"},
            {w:"anxiety", p:"/√¶≈ãÀàza…™…ôti/", t:"n", m:"n·ªói lo, m·ªëi bƒÉn khoƒÉn"},
            {w:"appropriately", p:"/…ôÀàpr…ô äpri…ôtli/", t:"adv", m:"ph√π h·ª£p, th√≠ch ƒë√°ng"},
            {w:"assignment", p:"/…ôÀàsa…™nm…ônt/", t:"n", m:"nhi·ªám v·ª•, b√†i t·∫≠p"},
            {w:"counsellor", p:"/Ààka äns…ôl…ô/", t:"n", m:"c·ªë v·∫•n, ng∆∞·ªùi t∆∞ v·∫•n"},
            {w:"deadline", p:"/Ààdedla…™n/", t:"n", m:"h·∫°n ch√≥t"},
            {w:"delay", p:"/d…™Ààle…™/", t:"v", m:"tr√¨ ho√£n, l√†m ch·∫≠m tr·ªÖ"},
            {w:"distraction", p:"/d…™Ààstr√¶k Én/", t:"n", m:"ƒëi·ªÅu l√†m sao l√£ng"},
            {w:"due date", p:"/ÀàdjuÀê de…™t/", t:"n", m:"h·∫°n ch√≥t"},
            {w:"fattening", p:"/Ààf√¶tn…™≈ã/", t:"adj", m:"g√¢y b√©o ph√¨"},
            {w:"mental", p:"/Ààmentl/", t:"adj", m:"(thu·ªôc) tinh th·∫ßn, tr√≠ tu·ªá"},
            {w:"minimise", p:"/Ààm…™n…™ma…™z/", t:"v", m:"gi·∫£m ƒë·∫øn m·ª©c t·ªëi thi·ªÉu"},
            {w:"mood", p:"/muÀêd/", t:"n", m:"t√¢m tr·∫°ng"},
            {w:"optimistic", p:"/Àå…ípt…™Ààm…™st…™k/", t:"adj", m:"l·∫°c quan"},
            {w:"physical", p:"/Ààf…™z…™kl/", t:"adj", m:"(thu·ªôc) th·ªÉ ch·∫•t, c∆° th·ªÉ"},
            {w:"priority", p:"/pra…™Àà…ír…ôti/", t:"n", m:"s·ª± ∆∞u ti√™n"},
            {w:"stressed out", p:"/strest a ät/", t:"adj", m:"cƒÉng th·∫≥ng"},
            {w:"well-balanced", p:"/Àåwel Ààb√¶l…ônst/", t:"adj", m:"c√¢n b·∫±ng, ƒë√∫ng m·ª±c"}
        ]},
        "u4": { title: "Unit 4: Remembering the Past", words: [
            {w:"ancient", p:"/Ààe…™n É…ônt/", t:"adj", m:"c·ªï ƒë·∫°i, l√¢u ƒë·ªùi"},
            {w:"anniversary", p:"/Àå√¶n…™Ààv…úÀês…ôri/", t:"n", m:"ng√†y k·ªâ ni·ªám"},
            {w:"barefoot", p:"/Ààbe…ôf ät/", t:"adj, adv", m:"ch√¢n tr·∫ßn"},
            {w:"basic", p:"/Ààbe…™s…™k/", t:"adj", m:"c∆° b·∫£n"},
            {w:"castle", p:"/Ààk…ëÀêsl/", t:"n", m:"l√¢u ƒë√†i"},
            {w:"communal", p:"/k…ôÀàmjuÀênl/", t:"adj", m:"d√πng chung, c√¥ng c·ªông"},
            {w:"complex", p:"/Ààk…ímpleks/", t:"n", m:"khu ph·ª©c h·ª£p, qu·∫ßn th·ªÉ"},
            {w:"deep-rooted", p:"/ÀådiÀêp ÀàruÀêt…™d/", t:"adj", m:"l√¢u ƒë·ªùi, ƒÉn s√¢u b√©n r·ªÖ"},
            {w:"face to face", p:"/fe…™s t…ô Ààfe…™s/", t:"adv", m:"tr·ª±c ti·∫øp, tr·ª±c di·ªán"},
            {w:"fish and chips", p:"/f…™ É …ôn Ààt É…™ps/", t:"n", m:"m√≥n c√° v√† khoai t√¢y r√°n"},
            {w:"found", p:"/fa änd/", t:"v", m:"th√†nh l·∫≠p"},
            {w:"generation", p:"/Àåd íen…ôÀàre…™ Én/", t:"n", m:"th·∫ø h·ªá"},
            {w:"monument", p:"/Ààm…ínjum…ônt/", t:"n", m:"t∆∞·ª£ng ƒë√†i"},
            {w:"observe", p:"/…ôbÀàz…úÀêv/", t:"v", m:"duy tr√¨, tu√¢n theo"},
            {w:"occupied", p:"/Àà…íkjupa…™d/", t:"adj", m:"c√≥ ng∆∞·ªùi ·ªü"},
            {w:"occupy", p:"/Àà…íkjupa…™/", t:"v", m:"chi·∫øm gi·ªØ"},
            {w:"promote", p:"/pr…ôÀàm…ô ät/", t:"v", m:"th√∫c ƒë·∫©y"},
            {w:"recognise", p:"/Ààrek…ôgna…™z/", t:"v", m:"c√¥ng nh·∫≠n"},
            {w:"religious", p:"/r…™Ààl…™d í…ôs/", t:"adj", m:"(thu·ªôc) t√¥n gi√°o"},
            {w:"structure", p:"/Ààstr åkt É…ô/", t:"n", m:"c·∫•u tr√∫c"},
            {w:"takeaway", p:"/Ààte…™k…ôwe…™/", t:"n", m:"ƒë·ªì ƒÉn b√°n s·∫µn (mang v·ªÅ)"}
        ]},
        "u5": { title: "Unit 5: Our Experiences", words: [
            {w:"amazing", p:"/…ôÀàme…™z…™≈ã/", t:"adj", m:"ng·∫°c nhi√™n, ƒë√°ng ng∆∞·ª°ng m·ªô"},
            {w:"army-like", p:"/Àà…ëÀêmi la…™k/", t:"adj", m:"nh∆∞ trong qu√¢n ƒë·ªôi"},
            {w:"brilliant", p:"/Ààbr…™li…ônt/", t:"adj", m:"r·∫•t ·∫•n t∆∞·ª£ng, th√¥ng minh"},
            {w:"campus", p:"/Ààk√¶mp…ôs/", t:"n", m:"khu√¥n vi√™n (tr∆∞·ªùng h·ªçc)"},
            {w:"confidence", p:"/Ààk…ínf…™d…ôns/", t:"n", m:"ni·ªÅm tin, s·ª± tin t∆∞·ªüng"},
            {w:"coral reef", p:"/Ààk…ír…ôl riÀêf/", t:"n", m:"r·∫∑ng san h√¥"},
            {w:"eco-tour", p:"/ÀàiÀêk…ô ä t ä…ô/", t:"n", m:"du l·ªãch sinh th√°i"},
            {w:"embarrassing", p:"/…™mÀàb√¶r…ôs…™≈ã/", t:"adj", m:"l√†m ai b·ªëi r·ªëi, ng∆∞·ª£ng"},
            {w:"exhilarating", p:"/…™gÀàz…™l…ôre…™t…™≈ã/", t:"adj", m:"ƒë·∫ßy ph·∫•n kh√≠ch"},
            {w:"experience", p:"/…™kÀàsp…™…ôri…ôns/", t:"n", m:"s·ª± tr·∫£i nghi·ªám"},
            {w:"explore", p:"/…™kÀàspl…îÀê/", t:"v", m:"kh√°m ph√°, t√¨m t√≤i"},
            {w:"fauna", p:"/Ààf…îÀên…ô/", t:"n", m:"h·ªá ƒë·ªông v·∫≠t"},
            {w:"flora", p:"/Ààfl…îÀêr…ô/", t:"n", m:"h·ªá th·ª±c v·∫≠t"},
            {w:"lack", p:"/l√¶k/", t:"v", m:"thi·∫øu"},
            {w:"learn by rote", p:"/l…úÀên ba…™ r…ô ät/", t:"v", m:"h·ªçc v·∫πt"},
            {w:"memorable", p:"/Ààmem…ôr…ôbl/", t:"adj", m:"ƒë√°ng nh·ªõ"},
            {w:"performance", p:"/p…ôÀàf…îÀêm…ôns/", t:"n", m:"bu·ªïi bi·ªÉu di·ªÖn"},
            {w:"seabed", p:"/ÀàsiÀêbed/", t:"n", m:"ƒë√°y bi·ªÉn"},
            {w:"snorkelling", p:"/Ààsn…îÀêk…ôl…™≈ã/", t:"n", m:"m√¥n l·∫∑n c√≥ ·ªëng th·ªü"},
            {w:"theme", p:"/Œ∏iÀêm/", t:"n", m:"ch·ªß ƒë·ªÅ, ƒë·ªÅ t√†i"},
            {w:"thrilling", p:"/ÀàŒ∏r…™l…™≈ã/", t:"adj", m:"r·∫•t ph·∫•n kh√≠ch, vui"},
            {w:"touching", p:"/Ààt åt É…™≈ã/", t:"adj", m:"g√¢y x√∫c ƒë·ªông"},
            {w:"tribal dance", p:"/Ààtra…™bl d…ëÀêns/", t:"n", m:"ƒëi·ªáu m√∫a c·ªßa b·ªô t·ªôc"},
            {w:"unpleasant", p:"/ ånÀàpleznt/", t:"adj", m:"kh√¥ng tho·∫£i m√°i, kh√≥ ch·ªãu"}
        ]},
        "u6": { title: "Unit 6: Viet Nam: Then and Now", words: [
            {w:"democratic", p:"/Àådem…ôÀàkr√¶t…™k/", t:"adj", m:"thu·ªôc d√¢n ch·ªß"},
            {w:"dependent", p:"/d…™Ààpend…ônt/", t:"adj", m:"l·ªá thu·ªôc v√†o"},
            {w:"dye", p:"/da…™/", t:"v", m:"nhu·ªôm"},
            {w:"extended", p:"/…™kÀàstend…™d/", t:"adj", m:"(gia ƒë√¨nh) nhi·ªÅu th·∫ø h·ªá"},
            {w:"family-oriented", p:"/Ààf√¶m…ôli Àà…îÀêrient…™d/", t:"adj", m:"h∆∞·ªõng v·ªÅ gia ƒë√¨nh"},
            {w:"gap", p:"/g√¶p/", t:"n", m:"kho·∫£ng c√°ch"},
            {w:"generation", p:"/Àåd íen…ôÀàre…™ Én/", t:"n", m:"th·∫ø h·ªá"},
            {w:"household", p:"/Ààha äsh…ô äld/", t:"n", m:"h·ªô gia ƒë√¨nh"},
            {w:"lifestyle", p:"/Ààla…™fsta…™l/", t:"n", m:"l·ªëi s·ªëng"},
            {w:"memorise", p:"/Ààmem…ôra…™z/", t:"v", m:"ghi nh·ªõ"},
            {w:"monk", p:"/m å≈ãk/", t:"n", m:"nh√† s∆∞"},
            {w:"nuclear", p:"/ÀànjuÀêkli…ô/", t:"adj", m:"(gia ƒë√¨nh) h·∫°t nh√¢n/2 th·∫ø h·ªá"},
            {w:"opportunity", p:"/Àå…íp…ôÀàtjuÀên…ôti/", t:"n", m:"c∆° h·ªôi"},
            {w:"popularity", p:"/Àåp…ípjuÀàl√¶r…ôti/", t:"n", m:"s·ª± ph·ªï bi·∫øn"},
            {w:"privacy", p:"/Ààpr…™v…ôsi/", t:"n", m:"s·ª± ri√™ng t∆∞"},
            {w:"promise", p:"/Ààpr…ím…™s/", t:"n, v", m:"l·ªùi h·ª©a, h·ª©a"},
            {w:"pursue", p:"/p…ôÀàsjuÀê/", t:"v", m:"theo ƒëu·ªïi"},
            {w:"replace", p:"/r…™Ààple…™s/", t:"v", m:"thay th·∫ø"},
            {w:"take notes", p:"/te…™k n…ô äts/", t:"v", m:"ghi ch√©p"},
            {w:"trend", p:"/trend/", t:"n", m:"xu h∆∞·ªõng"},
            {w:"western", p:"/Ààwest…ôn/", t:"adj", m:"thu·ªôc ph∆∞∆°ng T√¢y"}
        ]},
        "u7": { title: "Unit 7: Natural Wonders", words: [
            {w:"access", p:"/Àà√¶kses/", t:"n", m:"ti·∫øp c·∫≠n, ƒë·∫øn ƒë∆∞·ª£c"},
            {w:"annual", p:"/Àà√¶nju…ôl/", t:"adj", m:"(x·∫£y ra) h√†ng nƒÉm"},
            {w:"biodiversity", p:"/Àåba…™…ô äda…™Ààv…úÀês…ôti/", t:"n", m:"s·ª± ƒëa d·∫°ng sinh h·ªçc"},
            {w:"coral", p:"/Ààk…ír…ôl/", t:"n, adj", m:"san h√¥"},
            {w:"crazy (about)", p:"/Ààkre…™zi/", t:"adj", m:"th√≠ch m√™"},
            {w:"destination", p:"/Àådest…™Ààne…™ Én/", t:"n", m:"ƒëi·ªÉm ƒë·∫øn"},
            {w:"ecosystem", p:"/ÀàiÀêk…ô äs…™st…ôm/", t:"n", m:"h·ªá sinh th√°i"},
            {w:"feature", p:"/ÀàfiÀêt É…ô/", t:"n", m:"ƒë·∫∑c ƒëi·ªÉm"},
            {w:"locate", p:"/l…ô äÀàke…™t/", t:"v", m:"ƒë·ªãnh v·ªã, ƒë·∫∑t ·ªü"},
            {w:"location", p:"/l…ô äÀàke…™ Én/", t:"n", m:"ƒë·ªãa ƒëi·ªÉm, n∆°i ch·ªën"},
            {w:"majestic", p:"/m…ôÀàd íest…™k/", t:"adj", m:"uy nghi, tr√°ng l·ªá"},
            {w:"occur", p:"/…ôÀàk…úÀê/", t:"v", m:"x·∫£y ra"},
            {w:"paradise", p:"/Ààp√¶r…ôda…™s/", t:"n", m:"thi√™n ƒë∆∞·ªùng"},
            {w:"peak", p:"/piÀêk/", t:"n", m:"ƒë·ªânh (n√∫i)"},
            {w:"permission", p:"/p…ôÀàm…™ Én/", t:"n", m:"s·ª± cho ph√©p"},
            {w:"permit", p:"/p…ôÀàm…™t/", t:"v", m:"cho ph√©p"},
            {w:"possess", p:"/p…ôÀàzes/", t:"v", m:"c√≥, s·ªü h·ªØu"},
            {w:"support", p:"/s…ôÀàp…îÀêt/", t:"v", m:"·ªßng h·ªô, gi√∫p ƒë·ª°"},
            {w:"sustainable", p:"/s…ôÀàste…™n…ôbl/", t:"adj", m:"b·ªÅn v·ªØng"},
            {w:"travel destination", p:"/Ààtr√¶vl dest…™Ààne…™ Én/", t:"n", m:"ƒëi·ªÉm ƒë·∫øn du l·ªãch"},
            {w:"urgent", p:"/Àà…úÀêd í…ônt/", t:"adj", m:"g·∫•p, c·∫•p b√°ch"}
        ]},
        "u8": { title: "Unit 8: Tourism", words: [
            {w:"agency", p:"/Ààe…™d í…ônsi/", t:"n", m:"h√£ng (du l·ªãch)"},
            {w:"agent", p:"/Ààe…™d í…ônt/", t:"n", m:"nh√¢n vi√™n h√£ng"},
            {w:"brochure", p:"/Ààbr…ô ä É…ô/", t:"n", m:"quy·ªÉn qu·∫£ng c√°o"},
            {w:"domestic tourism", p:"/d…ôÀàmest…™k Ààt ä…ôr…™z…ôm/", t:"n", m:"du l·ªãch trong n∆∞·ªõc"},
            {w:"estimate", p:"/Ààest…™me…™t/", t:"v", m:"t√≠nh to√°n, ∆∞·ªõc t√≠nh"},
            {w:"fixed", p:"/f…™kst/", t:"adj", m:"c·ªë ƒë·ªãnh"},
            {w:"food tourism", p:"/fuÀêd Ààt ä…ôr…™z…ôm/", t:"n", m:"du l·ªãch ·∫©m th·ª±c"},
            {w:"graveyard", p:"/Ààgre…™vj…ëÀêd/", t:"n", m:"nghƒ©a ƒë·ªãa"},
            {w:"holidaymaker", p:"/Ààh…íl…ôde…™me…™k…ô/", t:"n", m:"ng∆∞·ªùi ƒëi ngh·ªâ"},
            {w:"homestay", p:"/Ààh…ô ämste…™/", t:"n", m:"nh√† tr·ªç (du l·ªãch)"},
            {w:"hop-on hop-off", p:"/h…íp …ín h…íp …íf/", t:"n", m:"xe bu√Ωt du l·ªãch"},
            {w:"hunt", p:"/h ånt/", t:"v", m:"sƒÉn t√¨m"},
            {w:"itinerary", p:"/a…™Ààt…™n…ôr…ôri/", t:"n", m:"l·ªãch tr√¨nh"},
            {w:"loft", p:"/l…íft/", t:"n", m:"g√°c m√°i"},
            {w:"low season", p:"/l…ô ä ÀàsiÀêzn/", t:"n", m:"m√πa v·∫Øng kh√°ch"},
            {w:"online app", p:"/Àå…ínÀàla…™n √¶p/", t:"n", m:"·ª©ng d·ª•ng tr√™n m·∫°ng"},
            {w:"package holiday", p:"/Ààp√¶k…™d í Ààh…íl…ôde…™/", t:"n", m:"k√¨ ngh·ªâ tr·ªçn g√≥i"},
            {w:"ruinous", p:"/ÀàruÀê…™n…ôs/", t:"adj", m:"ƒë·ªï n√°t"},
            {w:"self-guided", p:"/self Ààga…™d…™d/", t:"adj", m:"t·ª± t·ªï ch·ª©c"},
            {w:"shopping tourism", p:"/Àà É…íp…™≈ã Ààt ä…ôr…™z…ôm/", t:"n", m:"du l·ªãch mua s·∫Øm"},
            {w:"smooth", p:"/smuÀê√∞/", t:"adj", m:"tr√¥i ch·∫£y"},
            {w:"wander", p:"/Ààw…índ…ô/", t:"v", m:"d·∫°o ch∆°i, lang thang"},
            {w:"world-famous", p:"/Àåw…úÀêld Ààfe…™m…ôs/", t:"adj", m:"n·ªïi ti·∫øng th·∫ø gi·ªõi"},
            {w:"work out", p:"/w…úÀêk a ät/", t:"v", m:"l√™n k·∫ø ho·∫°ch"}
        ]},
        "u9": { title: "Unit 9: English in the World", words: [
            {w:"bilingual", p:"/Àåba…™Ààl…™≈ãgw…ôl/", t:"adj", m:"s·ª≠ d·ª•ng hai ng√¥n ng·ªØ"},
            {w:"borrowed word", p:"/Ààb…ír…ô äd w…úÀêd/", t:"n", m:"t·ª´ m∆∞·ª£n"},
            {w:"concentric", p:"/k…ônÀàsentr…™k/", t:"adj", m:"ƒë·ªìng t√¢m"},
            {w:"consist", p:"/k…ônÀàs…™st/", t:"v", m:"bao g·ªìm"},
            {w:"copy", p:"/Ààk…ípi/", t:"v", m:"ch√©p l·∫°i"},
            {w:"establish", p:"/…™Ààst√¶bl…™ É/", t:"v", m:"th√†nh l·∫≠p"},
            {w:"exchange student", p:"/…™ksÀàt Ée…™nd í stjuÀêdnt/", t:"n", m:"h·ªçc sinh trao ƒë·ªïi"},
            {w:"Expanding Circle", p:"/…™kÀàsp√¶nd…™≈ã s…úÀêkl/", t:"n", m:"v√≤ng tr√≤n m·ªü r·ªông"},
            {w:"first language", p:"/f…úÀêst Ààl√¶≈ãgw…™d í/", t:"n", m:"ng√¥n ng·ªØ th·ª© nh·∫•t"},
            {w:"fluent", p:"/ÀàfluÀê…ônt/", t:"adj", m:"tr√¥i ch·∫£y"},
            {w:"go over", p:"/g…ô ä Àà…ô äv…ô/", t:"v", m:"√¥n t·∫≠p l·∫°i"},
            {w:"immigrant", p:"/Àà…™m…™gr…ônt/", t:"n", m:"ng∆∞·ªùi nh·∫≠p c∆∞"},
            {w:"Inner Circle", p:"/Àå…™n…ô Ààs…úÀêkl/", t:"n", m:"v√≤ng tr√≤n b√™n trong"},
            {w:"look up", p:"/l äk  åp/", t:"v", m:"tra (t·ª´ ƒëi·ªÉn)"},
            {w:"mean", p:"/miÀên/", t:"v", m:"nghƒ©a l√†"},
            {w:"model", p:"/Ààm…ídl/", t:"n", m:"m√¥ h√¨nh"},
            {w:"official language", p:"/…ôÀåf…™ Él Ààl√¶≈ãgw…™d í/", t:"n", m:"ng√¥n ng·ªØ ch√≠nh th·ª©c"},
            {w:"Outer Circle", p:"/Àåa ät…ô Ààs…úÀêkl/", t:"n", m:"v√≤ng tr√≤n b√™n ngo√†i"},
            {w:"pick up", p:"/p…™k  åp/", t:"v", m:"h·ªçc l·ªèm"},
            {w:"propose", p:"/pr…ôÀàp…ô äz/", t:"v", m:"ƒë·ªÅ xu·∫•t"},
            {w:"second language", p:"/Àåsek…ônd Ààl√¶≈ãgw…™d í/", t:"n", m:"ng√¥n ng·ªØ th·ª© hai"},
            {w:"standard", p:"/Ààst√¶nd…ôd/", t:"n", m:"chu·∫©n m·ª±c"},
            {w:"translate", p:"/tr√¶nzÀàle…™t/", t:"v", m:"d·ªãch"},
            {w:"variety", p:"/v…ôÀàra…™…ôti/", t:"n", m:"bi·∫øn th·ªÉ"},
            {w:"vocabulary", p:"/v…ôÀàk√¶bj…ôl…ôri/", t:"n", m:"t·ª´ v·ª±ng"}
        ]},
        "u10": { title: "Unit 10: Planet Earth", words: [
            {w:"affect", p:"/…ôÀàfekt/", t:"v", m:"g√¢y ·∫£nh h∆∞·ªüng"},
            {w:"appreciate", p:"/…ôÀàpriÀê Éie…™t/", t:"v", m:"ƒë√°nh gi√° cao"},
            {w:"climate change", p:"/Ààkla…™m…ôt t Ée…™nd í/", t:"n", m:"bi·∫øn ƒë·ªïi kh√≠ h·∫≠u"},
            {w:"droppings", p:"/Ààdr…íp…™≈ãz/", t:"n", m:"ph√¢n (ƒë·ªông v·∫≠t)"},
            {w:"essential", p:"/…™Ààsen Él/", t:"adj", m:"v√¥ c√πng quan tr·ªçng"},
            {w:"ecological balance", p:"/ÀåiÀêk…ôÀàl…íd í…™kl Ààb√¶l…ôns/", t:"n", m:"c√¢n b·∫±ng sinh th√°i"},
            {w:"fascinating", p:"/Ààf√¶s…™ne…™t…™≈ã/", t:"adj", m:"r·∫•t th√∫ v·ªã v√† h·∫•p d·∫´n"},
            {w:"fertilizer", p:"/Ààf…úÀêt…ôla…™z…ô/", t:"n", m:"ph√¢n b√≥n"},
            {w:"food chain", p:"/fuÀêd t Ée…™n/", t:"n", m:"chu·ªói th·ª©c ƒÉn"},
            {w:"grassland", p:"/Ààgr…ëÀêsl√¶nd/", t:"n", m:"khu v·ª±c ƒë·ªìng c·ªè"},
            {w:"habitat", p:"/Ààh√¶b…™t√¶t/", t:"n", m:"m√¥i tr∆∞·ªùng s·ªëng"},
            {w:"harm", p:"/h…ëÀêm/", t:"v", m:"l√†m h·∫°i"},
            {w:"landform", p:"/Ààl√¶ndf…îÀêm/", t:"n", m:"d·∫°ng ƒë·ªãa h√¨nh"},
            {w:"nature reserve", p:"/Ààne…™t É…ô r…™z…úÀêv/", t:"n", m:"khu b·∫£o t·ªìn thi√™n nhi√™n"},
            {w:"observe", p:"/…ôbÀàz…úÀêv/", t:"v", m:"quan s√°t, ch√∫ √Ω"},
            {w:"orbit", p:"/Àà…îÀêb…™t/", t:"v", m:"quay quanh qu·ªπ ƒë·∫°o"},
            {w:"outer space", p:"/Àåa ät…ô Ààspe…™s/", t:"n", m:"ngo√†i v≈© tr·ª•"},
            {w:"pesticide", p:"/Ààpest…™sa…™d/", t:"n", m:"thu·ªëc di·ªát c·ªè"},
            {w:"pole", p:"/p…ô äl/", t:"n", m:"c·ª±c (b·∫Øc / nam)"},
            {w:"preserve", p:"/pr…™Ààz…úÀêv/", t:"v", m:"b·∫£o t·ªìn"},
            {w:"threat", p:"/Œ∏ret/", t:"n", m:"n·ªëi ƒëe d·ªça"},
            {w:"vital", p:"/Ààva…™tl/", t:"adj", m:"quan tr·ªçng m·ª©c s·ªëng c√≤n"}
        ]},
        "u11": { title: "Unit 11: Electronic Devices", words: [
            {w:"3D printer", p:"/ÀåŒ∏riÀê diÀê Ààpr…™nt…ô/", t:"n", m:"m√°y in 3D"},
            {w:"aluminium", p:"/Àå√¶lj…ôÀàm…™ni…ôm/", t:"n", m:"nh√¥m"},
            {w:"camcorder", p:"/Ààk√¶mk…îÀêd…ô/", t:"n", m:"m√°y quay phim x√°ch tay"},
            {w:"cardboard", p:"/Ààk…ëÀêdb…îÀêd/", t:"n", m:"b√¨a c·ª©ng, c√°c t√¥ng"},
            {w:"copper", p:"/Ààk…íp…ô/", t:"n", m:"ƒë·ªìng"},
            {w:"e-reader", p:"/ÀàiÀê riÀêd…ô/", t:"n", m:"m√°y ƒë·ªçc s√°ch ƒëi·ªán t·ª≠"},
            {w:"leaflet", p:"/ÀàliÀêfl…ôt/", t:"n", m:"t·ªù r∆°i (ƒë·ªÉ qu·∫£ng c√°o)"},
            {w:"plastic", p:"/Ààpl√¶st…™k/", t:"n", m:"ch·∫•t d·∫ªo, nh·ª±a"},
            {w:"portable", p:"/Ààp…îÀêt…ôbl/", t:"adj", m:"c√≥ th·ªÉ mang theo, x√°ch tay"},
            {w:"portable music player", p:"/Ààp…îÀêt…ôbl ÀàmjuÀêz…™k ple…™…ô/", t:"n", m:"m√°y nghe nh·∫°c c·∫ßm tay"},
            {w:"robotic vacuum cleaner", p:"/r…ô äÀàb…ít…™k Ààv√¶kjuÀêm kliÀên…ô/", t:"n", m:"robot h√∫t b·ª•i t·ª± ƒë·ªông"},
            {w:"rubber", p:"/Ààr åb…ô/", t:"n", m:"cao su"},
            {w:"self-portrait", p:"/Àåself Ààp…îÀêtre…™t/", t:"n", m:"·∫£nh ch√¢n dung t·ª± ch·ª•p"},
            {w:"smartwatch", p:"/Ààsm…ëÀêtw…ít É/", t:"n", m:"ƒë·ªìng h·ªì th√¥ng minh"},
            {w:"steel", p:"/stiÀêl/", t:"n", m:"th√©p"},
            {w:"stylish", p:"/Ààsta…™l…™ É/", t:"adj", m:"h·ª£p th·ªùi trang"},
            {w:"suck", p:"/s åk/", t:"v", m:"h√∫t"},
            {w:"touchscreen", p:"/Ààt åt ÉskriÀên/", t:"n", m:"m√†n h√¨nh c·∫£m ·ª©ng"},
            {w:"virtual", p:"/Ààv…úÀêt Éu…ôl/", t:"adj", m:"·∫£o"},
            {w:"window shade", p:"/Ààw…™nd…ô ä  Ée…™d/", t:"n", m:"m√†nh c·ª≠a s·ªï"},
            {w:"wireless", p:"/Ààwa…™…ôl…ôs/", t:"adj", m:"kh√¥ng d√¢y, v√¥ tuy·∫øn"}
        ]},
        "u12": { title: "Unit 12: Career Paths", words: [
            {w:"agriculture engineering", p:"/Àà√¶gr…™k ålt É…ô end í…™Ààn…™…ôr…™≈ã/", t:"n", m:"ng√†nh kƒ© s∆∞ n√¥ng nghi·ªáp"},
            {w:"assembly worker", p:"/…ôÀàsembli w…úÀêk…ô/", t:"n", m:"c√¥ng nh√¢n d√¢y chuy·ªÅn"},
            {w:"bartender", p:"/Ààb…ëÀêtend…ô/", t:"n", m:"th·ª£ pha ch·∫ø ƒë·ªì u·ªëng"},
            {w:"career", p:"/k…ôÀàr…™…ô/", t:"n", m:"s·ª± nghi·ªáp"},
            {w:"cashier", p:"/k√¶Àà É…™…ô/", t:"n", m:"thu ng√¢n"},
            {w:"decisive", p:"/d…™Ààsa…™s…™v/", t:"adj", m:"quy·∫øt ƒëo√°n"},
            {w:"demanding", p:"/d…™Ààm…ëÀênd…™≈ã/", t:"adj", m:"kh·∫Øt khe, ph·ª©c t·∫°p"},
            {w:"fabric", p:"/Ààf√¶br…™k/", t:"n", m:"v·∫£i v√≥c"},
            {w:"garment worker", p:"/Ààg…ëÀêm…ônt w…úÀêk…ô/", t:"n", m:"c√¥ng nh√¢n may"},
            {w:"hand-eye coordination", p:"/h√¶nd a…™ k…ô äÀå…îÀêd…™Ààne…™ Én/", t:"n", m:"s·ª± ph·ªëi h·ª£p tay m·∫Øt"},
            {w:"hands-on", p:"/h√¶ndz Àà…ín/", t:"adj", m:"c√≥ t√≠nh th·ª±c ti·ªÖn"},
            {w:"inquiring", p:"/…™nÀàkwa…™…ôr…™≈ã/", t:"adj", m:"ham h·ªçc h·ªèi"},
            {w:"knowledgeable", p:"/Ààn…íl…™d í…ôbl/", t:"adj", m:"am hi·ªÉu, th√¥ng th·∫°o"},
            {w:"mechanic", p:"/m…ôÀàk√¶n…™k/", t:"n", m:"th·ª£ s·ª≠a ch·ªØa"},
            {w:"orientation", p:"/Àå…îÀêri…ônÀàte…™ Én/", t:"n", m:"s·ª± ƒë·ªãnh h∆∞·ªõng"},
            {w:"repetitive", p:"/r…™Ààpet…ôt…™v/", t:"adj", m:"l·∫∑p ƒëi l·∫∑p l·∫°i"},
            {w:"rewarding", p:"/r…™Ààw…îÀêd…™≈ã/", t:"adj", m:"b·ªï √≠ch, x·ª©ng ƒë√°ng"},
            {w:"sew", p:"/s…ô ä/", t:"v", m:"kh√¢u, may v√°"},
            {w:"software engineer", p:"/Ààs…íftwe…ô end í…™Ààn…™…ô/", t:"n", m:"kƒ© s∆∞ ph·∫ßn m·ªÅm"},
            {w:"surgeon", p:"/Ààs…úÀêd í…ôn/", t:"n", m:"b√°c sƒ© ph·∫´u thu·∫≠t"},
            {w:"vocational", p:"/v…ô äÀàke…™ É…ônl/", t:"adj", m:"thu·ªôc v·ªÅ ngh·ªÅ nghi·ªáp"},
            {w:"well-paid", p:"/Àåwel Ààpe…™d/", t:"adj", m:"ƒë∆∞·ª£c tr·∫£ l∆∞∆°ng cao"}
        ]}
    };

    // --- GAME LOGIC ---
    let currentUnit = "u1";
    let score = 0;
    let quizData = [];
    let qIndex = 0;

    window.onload = () => {
        initSelect();
        loadUnit();
    };

    function initSelect() {
        const sel = document.getElementById('unitSelect');
        sel.innerHTML = "";
        for (const [key, val] of Object.entries(db)) {
            let opt = document.createElement("option");
            opt.value = key;
            opt.text = val.title;
            sel.appendChild(opt);
        }
    }

    function loadUnit() {
        currentUnit = document.getElementById('unitSelect').value;
        score = 0;
        document.getElementById('scoreVal').innerText = score;
        switchMode('learn');
        renderFlashcards();
    }

    function switchMode(mode) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        
        if (mode === 'learn') {
            document.getElementById('learnArea').classList.remove('hidden');
            document.getElementById('quizArea').classList.add('hidden');
        } else {
            document.getElementById('learnArea').classList.add('hidden');
            document.getElementById('quizArea').classList.remove('hidden');
            startQuiz();
        }
    }

    // FLASHCARD RENDER
    function renderFlashcards() {
        const container = document.getElementById('learnArea');
        container.innerHTML = "";
        const words = db[currentUnit].words;
        
        words.forEach(item => {
            let card = document.createElement('div');
            card.className = "card";
            card.innerHTML = `
                <div class="card-inner">
                    <div class="front">
                        <div class="word">${item.w}</div>
                        <div class="ipa">${item.p}</div>
                        <div class="type">${item.t}</div>
                        <div style="font-size:12px; margin-top:15px; color:#bbb;">(Ch·∫°m ƒë·ªÉ l·∫≠t)</div>
                    </div>
                    <div class="back">
                        <div class="meaning">${item.m}</div>
                    </div>
                </div>
            `;
            card.onclick = () => card.classList.toggle('flipped');
            container.appendChild(card);
        });
    }

    // QUIZ LOGIC
    function startQuiz() {
        qIndex = 0;
        score = 0;
        document.getElementById('scoreVal').innerText = "0";
        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('feedback').innerText = "";
        
        // Shuffle current unit words
        quizData = [...db[currentUnit].words].sort(() => 0.5 - Math.random());
        showQuestion();
    }

    function showQuestion() {
        if (qIndex >= quizData.length) {
            document.querySelector('.quiz-box').innerHTML = `
                <h2 style="color:var(--primary)">üèÜ Ho√†n th√†nh!</h2>
                <p>B·∫°n ƒë·∫°t <b>${score} / ${quizData.length * 10}</b> ƒëi·ªÉm</p>
                <button class="next-btn" style="display:inline-block" onclick="location.reload()">Ch·ªçn b√†i kh√°c</button>
            `;
            return;
        }

        const item = quizData[qIndex];
        document.getElementById('qWord').innerText = item.w;
        document.getElementById('feedback').innerText = "";
        document.getElementById('nextBtn').style.display = 'none';

        // Correct answer
        const correct = item.m;
        let options = [correct];
        
        // Distractors (wrong answers)
        let otherWords = db[currentUnit].words.filter(w => w.w !== item.w);
        // Fallback if unit has few words
        if (otherWords.length < 3) otherWords = otherWords.concat(db["u1"].words);
        
        let wrongs = otherWords.sort(() => 0.5 - Math.random()).slice(0, 3);
        wrongs.forEach(w => options.push(w.m));
        
        // Shuffle options
        options.sort(() => 0.5 - Math.random());

        const optContainer = document.getElementById('qOptions');
        optContainer.innerHTML = "";
        options.forEach(opt => {
            let btn = document.createElement('div');
            btn.className = 'opt';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, opt, correct);
            optContainer.appendChild(btn);
        });
    }

    function checkAnswer(btn, selected, correct) {
        const allOpts = document.querySelectorAll('.opt');
        allOpts.forEach(o => o.style.pointerEvents = 'none'); // Disable clicks

        if (selected === correct) {
            btn.classList.add('correct');
            document.getElementById('feedback').innerText = "Ch√≠nh x√°c! üéâ";
            document.getElementById('feedback').style.color = "green";
            score += 10;
        } else {
            btn.classList.add('wrong');
            document.getElementById('feedback').innerText = `Sai r·ªìi! ƒê√°p √°n l√†: ${correct}`;
            document.getElementById('feedback').style.color = "red";
            // Highlight correct one
            allOpts.forEach(o => {
                if (o.innerText === correct) o.classList.add('correct');
            });
        }
        document.getElementById('scoreVal').innerText = score;
        document.getElementById('nextBtn').style.display = 'inline-block';
    }

    function nextQuestion() {
        qIndex++;
        showQuestion();
    }

</script>

</body>
</html>